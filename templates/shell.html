<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPi Web Shell</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.1.0/css/xterm.css" />
    <link rel="stylesheet" href="static/css/shell.css" />
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.1.0/lib/xterm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.7.0/lib/xterm-addon-fit.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-web-links@0.8.0/lib/xterm-addon-web-links.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-search@0.11.0/lib/xterm-addon-search.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-serialize@0.9.0/lib/xterm-addon-serialize.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-clipboard@0.1.0/lib/xterm-addon-clipboard.js"></script>
</head>
<body>
    <div id="api-key-modal" class="api-key-modal">
        <div class="modal-content">
            <h2>Authentication Required</h2>
            <p>Please enter your API key to access the shell:</p>
            <input type="password" id="api-key-input" placeholder="Enter API key">
            <div class="modal-buttons">
                <button onclick="window.location.href='#'">Back to Dashboard</button>
                <button onclick="authenticateWithApiKey()">Login</button>
            </div>
        </div>
    </div>

    <header>
        <h1>RPi Web Shell</h1>
        <div>
            <span id="connection-status"></span>
            <button onclick="window.location.href='#'">Dashboard</button>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </header>
    
    <div class="terminal-container">
        <div class="tab-bar">
            <div class="new-tab-button" onclick="createNewTab()">+ New Terminal</div>
        </div>
        <div class="terminals" id="terminals"></div>
    </div>
    
    <!-- Terminal toolbar for clipboard operations -->
    <div class="terminal-toolbar" id="terminal-toolbar">
        <button id="copy-button" title="Copy selection (Ctrl+Shift+C)"><span class="toolbar-icon">üìã</span> Copy</button>
        <button id="paste-button" title="Paste (Ctrl+Shift+V)"><span class="toolbar-icon">üìå</span> Paste</button>
        <button id="find-button" title="Find in terminal (Ctrl+F)"><span class="toolbar-icon">üîç</span> Find</button>
        <button id="select-all-button" title="Select all (Ctrl+A)"><span class="toolbar-icon">‚òë</span> Select All</button>
    </div>
    
    <!-- Context menu for tabs -->
    <div class="tab-context-menu" id="tab-context-menu">
        <div class="tab-context-menu-item" onclick="renameTab()">Rename</div>
        <div class="tab-context-menu-item" onclick="duplicateTab()">Duplicate</div>
        <div class="tab-context-menu-item" onclick="closeTab()">Close</div>
        <div class="tab-context-menu-item" onclick="closeOtherTabs()">Close Others</div>
    </div>

    <footer>
        <div class="left">
            <span id="current-time"></span>
        </div>
        <div class="center">
            Originally part of <a href="https://github.com/QinCai-rui/RPi-Metrics" target="_blank">RPi-Metrics</a>
        </div>
        <div class="right">
            Made with ‚ù§Ô∏è by <a href="https://github.com/QinCai-rui" target="_blank">@QinCai-rui</a>
        </div>
    </footer>
    
    <script src="static/js/shell.js"></script>
</body>
</html>
